<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Temo Connect | Home</title>
  <link rel="icon" href="/images/logo.png" type="image/png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navigation -->
  <header>
    <div class="logo">
      <img src="images/logo2.png" alt="Temo Connect Logo">
      Temo Connect
    </div>

    <nav>
      <ul>
        <li><a href="products.html">Products</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="about.html">About us</a></li>
        <li class="dropdown">
          <a href="#">Register</a>
          <ul class="dropdown-content">
            <li><a href="farmer-register.html">Farmer</a></li>
            <li><a href="consumer-register.html">Consumer</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="#">Login</a>
          <ul class="dropdown-content">
            <li><a href="farmer-login.html">Farmer</a></li>
            <li><a href="consumer-login.html">Consumer</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-search">
      <input type="text" id="searchInput" placeholder="ðŸ” Search products..." onkeyup="filterProducts()">
    </div>

    <h1>Welcome to Temo Connect</h1>
    <p>Bridging the gap between <strong>farmers</strong> and <strong>consumers</strong>.</p>
    <a href="products.html" class="btn">Explore Products</a>
  </section>

  <!-- Products Section -->
  <section class="products-section">
    <h2>Featured Products</h2>

    <!-- Product Grid -->
    <div class="product-grid" id="productGrid"></div>

    <!-- See More Button -->
    <div class="see-more-container" style="text-align: right; margin-top: 1rem;">
      <a href="products.html" class="btn">See More â†’</a>
    </div>
  </section>

  <!-- Intro Section -->
  <section class="intro">
    <h2>About Temo Connect</h2>
    <p>
      Temo Connect is a platform where farmers can sell their fresh produce directly to consumers.  
      Farmers register and get verified by an admin before posting their products online.  
      Consumers can browse and buy farm-fresh items with ease, supporting local communities.
    </p>
  </section>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Temo Connect. All rights reserved.</p>
  </footer>

  <!-- Scripts -->
  <script>
    let allProducts = [];
    let currentCount = 0;
    const perPage = 8;

    async function loadProducts() {
      try {
        const res = await fetch("http://localhost:5000/api/products");
        allProducts = await res.json();
        currentCount = 0;
        renderProducts();
      } catch(err) {
        console.error("Error loading products:", err);
        document.getElementById("productGrid").innerHTML = "<p>Failed to load products.</p>";
      }
    }

    function renderProducts() {
      const grid = document.getElementById("productGrid");
      const productsToShow = allProducts.slice(0, currentCount + perPage);
      grid.innerHTML = productsToShow.map(p => `
        <div class="product-card">
          <img src="${p.image_url || '/images/placeholder.jpg'}" alt="${p.name}">
          <h3>${p.name}</h3>
          <p>Price: R${p.price}</p>
          <p>Farmer: ${p.farmer_name}</p>
          <a href="consumer-login.html" class="btn">Buy</a>
        </div>
      `).join("");
      currentCount += perPage;
    }

    function loadMoreProducts() {
      if(currentCount < allProducts.length) {
        renderProducts();
      }
    }

    function filterProducts() {
      const input = document.getElementById('searchInput').value.toLowerCase();
      const cards = document.querySelectorAll('.product-card');

      cards.forEach(card => {
        const productName = card.querySelector('h3').textContent.toLowerCase();
        card.style.display = productName.includes(input) ? '' : 'none';
      });
    }

    document.addEventListener("DOMContentLoaded", loadProducts);
  </script>
</body>
</html>
